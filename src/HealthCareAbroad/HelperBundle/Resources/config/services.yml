parameters:
    services.chromedia_request_class: HealthCareAbroad\HelperBundle\Services\ChromediaGlobalRequest
    services.create_invitation_class: HealthCareAbroad\HelperBundle\Services\CreateInvitation
    services.location_class: HealthCareAbroad\HelperBundle\Services\LocationService
    services.invitation_class: HealthCareAbroad\HelperBundle\Services\InvitationService
    services.token_class: HealthCareAbroad\HelperBundle\Services\TokenService
    services.country_list: HealthCareAbroad\HelperBundle\Form\ListType\CountryListType
    services.city_list: HealthCareAbroad\HelperBundle\Form\ListType\CityListType
    services.tagtype_list: HealthCareAbroad\HelperBundle\Form\ListType\TagTypeListType

services:
    services.chromedia_request:
        class: %services.chromedia_request_class%
        calls:
            - [setAppId, [%application_id%]]
            - [setAppSecret, [%application_secret%]]

    services.invitation:
        class: %services.invitation_class%
        arguments: [@doctrine]]
        calls:
            - [setTwig, [@twig]]
            - [setMailer, [@mailer]]
            
    services.token:
        class: %services.token_class%
        arguments: [@doctrine]

    services.location:
        class: %services.location_class%
        calls:
            - [setDoctrine, [@doctrine]]
    
    services.inquire:
        class: %services.inquire_class%
        calls:
            - [setDoctrine, [@doctrine]]
            
    services.breadcrumb_tree:
        class: HealthCareAbroad\HelperBundle\Services\BreadcrumbTreeService
        arguments: [@doctrine]]

    form.country_list:
        class: "%services.country_list%"
        calls:
            - [setContainer, [@service_container]]
        tags:
            - { name: form.type, alias: country_list }

    form.city_list:
        class: "%services.city_list%"
        calls:
            - [setContainer, [@service_container]]
        tags:
            - { name: form.type, alias: city_list }
    form.tagtype_list:
        class: "%services.tagtype_list%"
        tags:
            - { name: form.type, alias: tagtype_list }
            
    listener.helper.adminBreadcrumbBeforeController:
        class: HealthCareAbroad\HelperBundle\Listener\Breadcrumbs\AdminBreadcrumbBeforeControllerListener
        calls:
            - [setBreadcrumbService, [@services.breadcrumb_tree]]
            - [setTwig, [@twig]]
            - [setRouter, [@router]]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }
            
    listener.helper.institutionBreadcrumbBeforeController:
        class: HealthCareAbroad\HelperBundle\Listener\Breadcrumbs\InstitutionBreadcrumbBeforeControllerListener
        calls:
            - [setBreadcrumbService, [@services.breadcrumb_tree]]
            - [setTwig, [@twig]]
            - [setRouter, [@router]]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }


    listener.helper.ListFilterBeforeController:
        class: HealthCareAbroad\HelperBundle\Listener\ListFilterBeforeController
        calls:
            - [setTwig, [@twig]]
            - [setDoctrine, [@doctrine]]
            - [setRouter, [@router]]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }
