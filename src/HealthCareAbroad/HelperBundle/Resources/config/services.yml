parameters:
    services.chromedia_request_class: HealthCareAbroad\HelperBundle\Services\ChromediaGlobalRequest
    services.create_invitation_class: HealthCareAbroad\HelperBundle\Services\CreateInvitation
    services.location_class: HealthCareAbroad\HelperBundle\Services\LocationService
    services.invitation_class: HealthCareAbroad\HelperBundle\Services\InvitationService
    services.token_class: HealthCareAbroad\HelperBundle\Services\TokenService
    services.alert_class: HealthCareAbroad\HelperBundle\Services\AlertService
    services.country_list: HealthCareAbroad\HelperBundle\Form\ListType\CountryListType
    services.city_list: HealthCareAbroad\HelperBundle\Form\ListType\CityListType
    services.tagtype_list: HealthCareAbroad\HelperBundle\Form\ListType\TagTypeListType
    services.news_list: HealthCareAbroad\HelperBundle\Form\ListType\NewsListType
    services.language_list: HealthCareAbroad\HelperBundle\Form\ListType\LanguageListType
    services.advertisement_list: HealthCareAbroad\HelperBundle\Form\ListType\AdvertisementListType
    #services.user_class: HealthCareAbroad\UserBundle\Services\UserService

services:

    services.helper.institution_name_validator:
        class: HealthCareAbroad\HelperBundle\Validator\Constraints\InstitutionUniqueNameValidator
        arguments: [@doctrine]
        tags:
            - {name: validator.constraint_validator, alias: helper.institution_name.validator}

    services.helper.account_email_validator:
        class: HealthCareAbroad\HelperBundle\Validator\Constraints\ValidAccountEmailValidator
        calls:
            #- [setUserService, [@services.user]]
            - [setUserService, [@services.institution_user]]
        tags:
            - {name: validator.constraint_validator, alias: helper.account_email.validator}

    # factory class for creating named events
    events.factory:
        class: HealthCareAbroad\HelperBundle\Factory\EventFactory
        arguments: [@service_container]


    services.chromedia_request:
        class: %services.chromedia_request_class%
        calls:
            - [setAppId, [%application_id%]]
            - [setAppSecret, [%application_secret%]]

    services.invitation:
        class: %services.invitation_class%
        arguments: [@doctrine]]
        calls:
            - [setTwig, [@twig]]
            - [setMailer, [@mailer]]

    services.token:
        class: %services.token_class%
        arguments: [@doctrine]

    services.location:
        class: %services.location_class%
        calls:
            - [setDoctrine, [@doctrine]]

    #services.inquire:
    #    class: %services.inquiry_class%
    #    calls:
    #        - [setDoctrine, [@doctrine]]

    services.breadcrumb_tree:
        class: HealthCareAbroad\HelperBundle\Services\BreadcrumbTreeService
        arguments: [@doctrine]

    services.miscellaneous.twig.extension:
        class: HealthCareAbroad\HelperBundle\Twig\MiscellaneousTwigExtension
        calls:
            - [setClassLabels, [%class_labels%]]
            - [setClassKeys, [%class_keys%]]
        public: false
        tags:
            - { name: twig.extension }

    services.inline_javascript.twig.extension:
        class: HealthCareAbroad\HelperBundle\Twig\InlineJavascriptTwigExtension
        public: false
        calls:
            - [setTwig, [@twig]]
        tags:
            - { name: twig.extension }

    services.alert:
        class: %services.alert_class%
        arguments: [@doctrine, @service_container]

    services.user.twig.extension:
        class: HealthCareAbroad\UserBundle\Twig\UserTwigExtension
        public: false
        calls:
            - [setUserService, [@services.twig_user]]
        tags:
            - { name: twig.extension }

    form.country_list:
        class: "%services.country_list%"
        calls:
            - [setContainer, [@service_container]]
        tags:
            - { name: form.type, alias: country_list }

    form.city_list:
        class: "%services.city_list%"
        calls:
            - [setContainer, [@service_container]]
        tags:
            - { name: form.type, alias: city_list }

    form.tagtype_list:
        class: "%services.tagtype_list%"
        tags:
        - { name: form.type, alias: tagtype_list }
    form.language_list:
        class: "%services.language_list%"
        calls:
            - [setDoctrine, [@doctrine]]
        tags:
            - { name: form.type, alias: language_autocomplete }

    form.news_list:
        class: "%services.news_list%"
        calls:
            - [setContainer, [@service_container]]
        tags:
            - { name: form.type, alias: news_list }

    form.advertisement_list:
        class: "%services.advertisement_list%"
        calls:
           - [setContainer, [@service_container]]
        tags:
           - { name: form.type, alias: advertisement_list }

    listener.helper.adminBreadcrumbBeforeController:
        class: HealthCareAbroad\HelperBundle\Listener\Breadcrumbs\AdminBreadcrumbBeforeControllerListener
        calls:
            - [setBreadcrumbService, [@services.breadcrumb_tree]]
            - [setTwig, [@twig]]
            - [setRouter, [@router]]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }

    listener.helper.institutionBreadcrumbBeforeController:
        class: HealthCareAbroad\HelperBundle\Listener\Breadcrumbs\InstitutionBreadcrumbBeforeControllerListener
        calls:
            - [setBreadcrumbService, [@services.breadcrumb_tree]]
            - [setTwig, [@twig]]
            - [setRouter, [@router]]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }


    listener.helper.ListFilterBeforeController:
        class: HealthCareAbroad\HelperBundle\Listener\ListFilterBeforeController
        calls:
            - [setTwig, [@twig]]
            - [setDoctrine, [@doctrine]]
            - [setRouter, [@router]]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }

    listener.helper.preExecute:
        class: HealthCareAbroad\HelperBundle\Listener\PreExecuteController
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController, priority: -10 }

    listener.mailer.error_report.create:
        class: HealthCareAbroad\MailerBundle\Listener\ErrorReportListener
        calls:
            - [setTwig, [@twig]]
            - [setMailer, [@mailer]]
        tags:
            - { name: kernel.event_listener, event: event.errorReport.create, method: onCreate }
