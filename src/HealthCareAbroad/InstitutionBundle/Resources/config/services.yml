parameters:
    services.institution_class: HealthCareAbroad\InstitutionBundle\Services\InstitutionService
    services.institution_list : HealthCareAbroad\InstitutionBundle\Form\InstitutionListType
  
services:
    services.institution:
        class: %services.institution_class%
        arguments: [@doctrine]]
        calls:
            - [setInstitutionUserService, [@services.institution_user]]
            
    services.institutionMedicalCenter:
        class: HealthCareAbroad\InstitutionBundle\Services\InstitutionMedicalCenterService
        arguments: [@doctrine]]
    
    form.institution_list:
        class: "%services.institution_list%"
        calls:
          - [setContainer, [@service_container]]
        tags:
            - { name: form.type, alias: institution_list }

     ##listeners
    listener.user.institution.create:
        class: HealthCareAbroad\InstitutionBundle\Listener\InstitutionListener
        calls:
           - [setEntityManager, [@doctrine.orm.entity_manager]]
           - [setInstitutionUserService, [@services.institution_user]]
        tags:
            - { name: kernel.event_listener, event: event.institution.add, method: onAdd }
    
    listener.institution.edit:
        class: HealthCareAbroad\InstitutionBundle\Listener\InstitutionListener
        calls:
           - [setEntityManager, [@doctrine.orm.entity_manager]]
        tags:
            - { name: kernel.event_listener, event: event.institution.edit, method: onEdit }
    
    listener.institution.delete:
        class: HealthCareAbroad\InstitutionBundle\Listener\InstitutionListener
        calls:
           - [setEntityManager, [@doctrine.orm.entity_manager]]
        tags:
            - { name: kernel.event_listener, event: event.institution.edit, method: onDelete }
            
    listener.institution.authorizationBeforeController:
        class: HealthCareAbroad\InstitutionBundle\Listener\InstitutionAwareBeforeControllerListener
        calls:
           - [setDoctrine, [@doctrine]]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }
    