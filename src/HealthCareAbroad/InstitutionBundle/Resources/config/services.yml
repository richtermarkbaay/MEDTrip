parameters:
    services.institution_list : HealthCareAbroad\InstitutionBundle\Form\ListType\InstitutionListType
    services.doctor_list: HealthCareAbroad\InstitutionBundle\Form\ListType\InstitutionDoctorListType

services:
    services.institution:
        class: HealthCareAbroad\InstitutionBundle\Services\InstitutionService
        arguments: [@doctrine]
        calls:
            - [setInstitutionUserService, [@services.institution_user]]
            
    services.institution.factory:
        class: HealthCareAbroad\InstitutionBundle\Services\InstitutionFactory
        arguments: [@doctrine]
        calls:
            - [setMemcache, [@services.memcache]]
            - [setMemcacheKeyFactory, [@services.memcache.keyFactory]]

    services.institution_specialization:
        class: HealthCareAbroad\InstitutionBundle\Services\InstitutionSpecializationService
        arguments: [@doctrine]
        
    services.institution_property:
        class: HealthCareAbroad\InstitutionBundle\Services\InstitutionPropertyService
        arguments: [@doctrine, @services.memcache]
        
    services.institution_property.form_factory:
        class: HealthCareAbroad\InstitutionBundle\Form\InstitutionPropertyType\Factory\InstitutionPropertyTypeFormFactory
        arguments: [@form.factory]
        calls:
            - [setInstitutionPropertyService, [@services.institution_property]]

    services.institution_medical_center_property:
        class: HealthCareAbroad\InstitutionBundle\Services\InstitutionMedicalCenterPropertyService
        arguments: [@doctrine, @services.memcache]   

    services.institution_medical_center_property.form_factory:
        class: HealthCareAbroad\InstitutionBundle\Form\InstitutionMedicalCenterPropertyType\Factory\InstitutionMedicalCenterPropertyTypeFormFactory
        arguments: [@form.factory]
        calls:
            - [setInstitutionMedicalCenterPropertyService, [@services.institution_medical_center_property]]

    services.institution_medical_center:
        class: HealthCareAbroad\InstitutionBundle\Services\InstitutionMedicalCenterService
        calls:
            - [setDoctrine, [@doctrine]]
    
    services.institution_signup:
        class: HealthCareAbroad\InstitutionBundle\Services\SignUpService
        calls:
            - [setInstitutionFactory, [@services.institution.factory]]
            - [setInstitutionMedicalCenterService, [@services.institution_medical_center]]
        
    services.institution_list_transformer:
        class: HealthCareAbroad\InstitutionBundle\Form\Transformer\InstitutionTransformer
        calls: 
            - [setInstitutionService, [@services.institution]]

    form.institution_list:
        class: "%services.institution_list%"
        calls:
          - [setContainer, [@service_container]]
        tags:
            - { name: form.type, alias: institution_list }
            
    form.offeredService_list:
        class: HealthCareAbroad\InstitutionBundle\Form\ListType\InstitutionOfferedServiceListType
        tags:
            - { name: form.type, alias: offeredService_list }
    
    form.doctor_list:
        class: "%services.doctor_list%"
        calls:
            - [setDoctrine, [@doctrine]]
        tags:
            - { name: form.type, alias: doctor_list }
            
    form.institutionTreatment_list:
        class: HealthCareAbroad\InstitutionBundle\Form\ListType\InstitutionTreatmentListType
        tags:
            - { name: form.type, alias: institutionTreatment_list }

    form.institution_affiliation_list:
        class: HealthCareAbroad\InstitutionBundle\Form\ListType\InstitutionAffiliationListType
        tags:
          - { name: form.type, alias: institution_affiliation_list }
    
    form.medical_provider_group_list:
        class: HealthCareAbroad\InstitutionBundle\Form\ListType\MedicalProviderGroupListType
        calls:
            - [setDoctrine, [@doctrine]]
        tags:
            - { name: form.type, alias: medicalProviderGroup_autocomplete }
     
    form.specializations_autocomplete:
        class: HealthCareAbroad\InstitutionBundle\Form\ListType\SpecializationListType
        calls:
            - [setDoctrine, [@doctrine]]
        tags:
            - { name: form.type, alias: specializations_autocomplete }