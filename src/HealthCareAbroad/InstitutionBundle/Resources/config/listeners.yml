services:
    listener.institution.authorizationBeforeController:
        class: HealthCareAbroad\InstitutionBundle\Listener\InstitutionAwareBeforeControllerListener
        calls:
           - [setDoctrine, [@doctrine]]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }
            
    listener.log.institution_user.login:
        class: HealthCareAbroad\LogBundle\Listener\Institution\InstitutionUserListener
        arguments: [@doctrine]
        tags:
            - { name: kernel.event_listener, event: event.institution_user.login, method: onLogin }
            
    listener.user.institution.create:
        class: HealthCareAbroad\InstitutionBundle\Listener\InstitutionListener
        calls:
           - [setEntityManager, [@doctrine.orm.entity_manager]]
           - [setInstitutionUserService, [@services.institution_user]]
        tags:
            - { name: kernel.event_listener, event: event.institution.add, method: onAdd }
            
    
    ### --------- institution user type event listeners --------- ###
    
    listener.log.institution_user_type_role.add:
        class: HealthCareAbroad\LogBundle\Listener\Institution\InstitutionUserTypeListener
        arguments: [@doctrine]
        tags:
            - { name: kernel.event_listener, event: event.institution_user_type_role.add, method: onAddUserRole }
            
    listener.log.institution_user_type_role.delete:
        class: HealthCareAbroad\LogBundle\Listener\Institution\InstitutionUserTypeListener
        arguments: [@doctrine]
        tags:
            - { name: kernel.event_listener, event: event.institution_user_type_role.delete, method: onDeleteUserRole }
    
    
    ### --------- end institution user type event listeners --------- ###
        