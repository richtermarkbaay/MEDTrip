{% embed 'InstitutionBundle:Widgets:tabbedContent.base.html.twig' %}
    {% block tabbedContent %}
    <form id="modal_award_form" action="{{ path('institution_medicalCenter_ajaxUpdateBusinessHours', {'imcId': institutionMedicalCenter.id} ) }}">
        {{ form_label(form.awards_selector) }}
        {{ form_widget(form.awards_selector) }}
         <table class="table table-striped table-bordered awards_table">
         <thead>
            <tr>    
    			<th>Awards</th>
    			<th>Actions</th>
    		</tr>
         </thead>
         <tbody>
    		<tr style="display:none;" class="loader"><td colspan="2">Loading...</td></tr>
        		{% for _award in currentGlobalAwards.award %}
        		    {% include 'InstitutionBundle:MedicalCenter:tableRow.globalAward.html.twig' with {'award': _award.global_award, 'medical_center_property': _award.medical_center_property} %}
        		{% endfor %}
        </tbody>
    	</table>
    	<table class="table table-striped table-bordered certificates_table">
    	    {{ form_label(form.certifications_selector) }}
            {{ form_widget(form.certifications_selector) }}
            <thead>
                <tr>
            		<th>Certifications</th>
            		<th>Actions</th>
            	</tr>
            </thead>
            <tbody>
            	<tr style="display:none;"  class="loader"><td colspan="2" >Loading...</td></tr>
            	{% for _award in currentGlobalAwards.certificate %}
            	    {% include 'InstitutionBundle:MedicalCenter:tableRow.globalAward.html.twig' with {'award': _award.global_award, 'medical_center_property': _award.medical_center_property} %}
            	{% endfor %}
            </tbody>
    	</table>
    	<table class="table table-striped table-bordered affiliations_table">
    	     {{ form_label(form.affiliations_selector) }}
            {{ form_widget(form.affiliations_selector) }}
    		<thead>
                <tr>
    				<th>Affilliations</th>
    				<th>Actions</th>
    			</tr>
            </thead>
    		<tbody>
    			<tr style="display:none;"  class="loader"><td colspan="2">Loading...</td></tr>
    			{% for _award in currentGlobalAwards.affiliation %}
    			    {% include 'InstitutionBundle:MedicalCenter:tableRow.globalAward.html.twig' with {'award': _award.global_award, 'medical_center_property': _award.medical_center_property} %}
    			{% endfor %}
    		</tbody>
    	</table>
         {{ form_widget(form._token) }}
    </form>
    {% endblock %}
{% endembed %}
{% block inlineJavascriptCode %}
<script src="{{ asset('bundles/institution/js/institutionMedicalCenter.js') }}" type="text/javascript"></script>
<script type="text/javascript">
<!--
(function($){
    $(function(){

        InstitutionMedicalCenter.removePropertyUri = '{{ path("institution_medicalCenter_ajaxRemovePropertyValue", {"imcId" : institutionMedicalCenter.id} ) }}';

        InstitutionGlobalAwardAutocomplete
        .setLoadHtmlContentUri('{{ path("institution_medicalCenter_ajaxAddGlobalAward", {"imcId": institutionMedicalCenter.id}) }}') 
        .setAutocompleteOptions('award', {
            source: $.parseJSON('{{ awardsSourceJSON | raw }}'),
            target: $('input.award_selector'),
            selectedDataContainer: $('table.awards_table tbody'),
            loader: $('table.awards_table tbody tr.loader')
        })
        .setAutocompleteOptions('certificate', {
            source: $.parseJSON('{{ certificatesSourceJSON | raw }}'),
            target: $('input.certificate_selector'),
            selectedDataContainer: $('table.certificates_table tbody'),
            loader: $('table.certificates_table tbody tr.loader')
        })
        .setAutocompleteOptions('affiliation', {
            source: $.parseJSON('{{ affiliationsSourceJSON | raw }}'),
            target: $('input.affiliation_selector'),
            selectedDataContainer: $('table.affiliations_table tbody'),
            loader: $('table.affiliations_table tbody tr.loader')
        })
        .autocomplete();
    });
    
})(jQuery);
//-->
</script>
{% endblock %}