{# if institution is of type single center, use unauthenticated layout as base, since this is part of the signup process #}
{% extends  isSingleCenter ?  'InstitutionBundle::unauthenticated.layout.html.twig' : 'InstitutionBundle::layout.html.twig' %}
{% set disableMainNavigation = true %}
{% block content %}

    {% embed 'InstitutionBundle:Embed:contentWrapper.authenticated.html.twig' 
        with {'contentSpanClass' : 'span12' } %}
        {% block wrappedContent %}
        <div class="span12">    
            <h2></h2>
            {% include 'InstitutionBundle:Widgets:steps.addClinic.html.twig' with {activeStep: 'medical_specialists'} %}
            <form novalidate="novalidate" method="POST" class="span12" >
                {{ form_errors(form) }}
            
                <fieldset title="4" class="step" id="formwizard-step-4">
                    <legend>Search and Add your Medical Specialist</legend>
                    <div class="span9 marginleft0" style="min-height:500px">
                    
                        {{ form_row(form.firstName) }}
                        {{ form_row(form.id) }}
                        {{ form_rest(form) }}
                        <br><br>
                        <div style="margin-top:15px;">
                            <table id="medicalSpecialistTable" class="table table-striped table-bordered">
    							<tr>
    								<th>Medical Specialist</th>
    								<th>Actions</th>
    							</tr>
                			</table>
            			</div>
                    </div>
                    
                    <!-- TODO: this sidebar should not be part of the form. Let the ui-team fix this -->
                    <div class="span3">
                        {# include 'InstitutionBundle:Widgets:sidebar.benefitsShowcase.html.twig' #}
                    </div>
                    
                    <div class="clearfix"></div>
                    <input type="submit" name="submit" value="Submit" class="button-next btn-medium btn btn-info" />
                </fieldset>
            </form>
            
        </div>
        {% endblock %}
        
    {% endembed %}

{% endblock %}
 
{% block inlineJavascriptCode %}
    <script src="{{ asset('bundles/helper/js/DoctorAutocomplete.js') }}"></script>
	<script type="text/javascript">

		$(function() {
			var availableDoctors = $.parseJSON('{{ doctorsJSON | raw}}');
			var inputHiddenField = "#institutionDoctorSearch_id";
			var inputAutoDoctor = "#institutionDoctorSearch_firstName";
			var selectedTags = [];
		    
        	var params = {
                	availableTags: availableDoctors,
                	selectedTags : selectedTags,
                	inputHiddenField :inputHiddenField,
                	inputAutoDoctor :inputAutoDoctor
        		};
        	DoctorAuto.init(params);
		});

		</script>	
{% endblock %}