{% extends 'InstitutionBundle::layout.html.twig' %}
{% set mainNavigation = {selected: 'medical_centers'} %}
{% set clinicClassLabel = getClassLabel('clinic') %}
{% block content %}

<section id="content">
    <div class="container">
        <div class="row">
            <div class="span12">
                <div class="pull-right">
                    <a href="{{ path('institution_medicalCenter_add') }}" class="btn btn-success btn-large">Add A New {{ clinicClassLabel.singular | title}}</a>
                </div>
                <h1><span>{{ clinicClassLabel.plural | title}}</span></h1>
                
                <table class="table table-striped table-bordered bootstrap-datatable">
                    <thead>
                        <tr>
                            <th class="span3">{{ clinicClassLabel.singular | title}}</th>
                            <th>{{ clinicClassLabel.singular | title}} Info Details</th>
                            <th class="span3">Posting Details</th>
                            <th class="span3">Actions</th>
						</tr>
					</thead>
					<tbody>
					    {% for medicalCenter in medicalCenters %}
					    <tr>
					        <td>
					            <a href="{{ path('institution_medicalCenter_edit', {imcId:medicalCenter.id}) }}" title="View"><strong> {{ medicalCenter.name }}</strong></a>
				            </td>
				            <td>
				                <div class="truncatedDescription">
				                    {{ medicalCenter.description | raw  }}
				                </div>
				            </td>
				            <td>Created on {{ medicalCenter.dateCreated|date("M d, Y H:i A") }}</td>
				            <td>
				                <div class="post-toolbar">
				                    <i title="Edit" class="icon-pencil"></i>
				                    <a href="{{ path('institution_medicalCenter_edit', {imcId:medicalCenter.id}) }}" title="Edit" class="icon-1 info-tooltip">Edit</a>
				                </div>
			                </td>
		                </tr>
		                {% endfor %}
	                </tbody>
                </table>
                
                {% if pager.isPaginable %}
                   {{ paginate(pager, 'institution_medicalCenter_index', app.request.query.all) }}
                {% endif %}
                
            </div>
        </div><!--End of row-->
    </div><!--End of container-->
</section>
{% endblock %}

{% block inlineJavascriptCode %}
<script type="text/javascript" src="{{ asset('bundles/institution/js/common.js') }}" ></script>
<script type="text/javascript">
<!--
    (function($){
        $(function(){
            $('.truncatedDescription').truncateByHeight({'visibleRows': 5});
        });

        function grow(_el) {
            _el.css('height', '').css('overflow', '');
            _el.parents('td').find('a.collapse_toggle').removeClass('collapsed').html('<small>Less</small>');
        }
        
        function shrink(_el) {
            _el.css('height', 200).css('overflow', 'hidden');
            _el.parents('td').find('a.collapse_toggle').addClass('collapsed').html('<small>More</small>');
            _el.parents('td').find('a.collapse_toggle').show();
        }
    })(jQuery);
//-->
</script>
{% endblock %}
