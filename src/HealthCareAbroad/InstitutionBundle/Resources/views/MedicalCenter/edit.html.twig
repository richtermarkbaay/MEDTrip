{% extends 'InstitutionBundle::layout.html.twig' %}
{% set selectedTab = 'medical_centers'%}
{% block title %}{{ parent() }} Edit Medical Center {% endblock %}


{% block content %}
<!-- start content -->
<div id="content">
    <!--  start page-heading -->
    <div id="page-heading">
    	<h1>
    	    Edit {{ institutionMedicalCenter.medicalCenter.name }} medical center       
        </h1>
    </div>
    <!-- end page-heading -->
    
    {% embed '::contentWrapper.admin.html.twig' %}
        
        {% block wrappedContent %}
            
            {# ----- Related tasks ----- #}
            {% include 'InstitutionBundle:MedicalCenter:relatedTasks.html.twig' with {hideAddMedicalCenter: false, hideMedicalProcedureTypeTask: false, 'imcId': institutionMedicalCenter.id } %}
            {# ----- end Related tasks ----- #}
            
            <!--  start table-content  -->
			<div id="table-content" style="width:75%">
			
			    {% include '::notice.admin.html.twig' %}
			    
			    <div class="tab-container" id="tab-container" style="padding:20px;">
			        
			        <ul>
                        <li><a href="#tab-overview-imc-{{ institutionMedicalCenter.id }}">Overview</a></li>
                        {% for impt in institutionMedicalCenter.institutionMedicalProcedureTypes %}
                            <li><a href="#tab-impt-{{ impt.id }}">{{ impt.medicalProcedureType.name }}</a></li>
                        {% endfor %}
                    </ul>
                    
                    
                    <div id="tab-overview-imc-{{institutionMedicalCenter.id}}">
                        {{ institutionMedicalCenter.description }}
                    </div>
                    
                    {% for impt in institutionMedicalCenter.institutionMedicalProcedureTypes %}
                        <div id="tab-impt-{{ impt.id }}">
                            {% include 'InstitutionBundle:MedicalCenter:medicalProcedureTypeDetail.html.twig' with {'institutionMedicalCenter': institutionMedicalCenter, 'institutionMedicalProcedureType': impt } %}
                        </div>
                    {% endfor %}
                    
                </div>
            	
			</div>
			<!--  end table-content  -->
        			
        {% endblock %}
        
    {% endembed %}
    
</div>

<!--  end content -->
<div class="clear">&nbsp;</div>

{% endblock %}

{% block inlineJavascriptCode %}
	<script src="{{ asset('bundles/institution/js/InstitutionMedicalCenter.js') }}"></script>
	<script type="text/javascript">
		$(function(){
			
		    InstitutionMedicalCenter.setCommonDialog($('#dialog-container'), {
			    autoOpen: false,
			    height: 'auto',
			    width: 700,
			    modal: true,
			    resizable: false,
			    close: function() {
			        $('#dialog-container').html("");
			    }
			});
			
			
	        $("#tab-container").tabs().addClass('ui-tabs-vertical ui-helper-clearfix');
			$("#tab-container li").removeClass('ui-corner-top').addClass('ui-corner-left');			

			$('a.add-procedure-type').click(function(e){
			    return InstitutionMedicalCenter.addProcedureType($(this));
			});
		});
	</script>
{% endblock %}


