{% extends 'AdminBundle::layout.html.twig' %}
{% set selectedTab = 'institutions'%}
{% set selectedSubTab = 'institutions_index'%}

{% block content %}
    <div id="content">

        <div id="page-heading"><h3>List of Institutions</h3></div>

        {% embed '::contentWrapper.admin.html.twig' %}
            {% block wrappedContent %}
            
            {% include '::notice.admin.html.twig' %}

            <!-- Render Filter Box -->
            {% autoescape false %} {{ listFilters is defined ? listFilters : '' }} {% endautoescape %}

            {% set sortBy = app.request.get('sortBy') %}
            {% set sortOrder = app.request.get('sortOrder') %}
            {% set default = sortBy | length ? '' : 'sort-asc' %}
            
            <div>
                <table class="table table-bordered sortable-list">
                    <tr>
                        <th width="200" id="column-name"><a href="{{ app.request.uri }}" class="{{ sortBy == 'name' ? 'sort-' ~ sortOrder : default }}">Name</a></th>
                        <th id="column-description"><a href="{{ app.request.uri }}" class="{{ sortBy == 'description' ? 'sort-' ~ sortOrder : '' }}">Description</a></th>
                    </tr>
                
                    {% for each in datas %}
                        <tr id="each-{{each.id}}">
                            {% if isDoctor is sameas(false) %}
                                <td>
                                {% if category is sameas('institutions') %}
                                    <a class="name" href="{{ path('admin_institution_view', {institutionId: each.id}) }}" title="View {{ each.name }}">{{ each.name }}</a>
                                
                                {% elseif category is sameas('medicalCenters') %}
                                    <a class="name" href="{{ path('admin_institution_medicalCenter_view', {imcId: each.id}) }}" title="View {{ each.name }}">{{ each.name }}</a>
                                
                                {% elseif category is sameas('procedureTypes') %}
                                    <a class="name" href="{{ path('admin_treatment_edit', {id: each.id}) }}" title="View {{ each.name }}">{{ each.name }}</a>
                                
                                {% elseif category is sameas('specialization') %}
                                    <a class="name" href="{{ path('admin_specialization_edit', {id: each.id}) }}" title="View {{ each.name }}">{{ each.name }}</a>
                                
                                {% elseif category is sameas('sub-specialization') %}
                                    <a class="name" href="{{ path('admin_subSpecialization_edit', {id: each.id}) }}" title="View {{ each.name }}">{{ each.name }}</a>
                                {% endif %}
                                 </td>
                                <td>{{ each.description }}</td>
                            
                            {% else %}
                                <td><a class="name" href="{{ path('admin_doctor_edit', {idId: each.id}) }}" title="View {{ each.firstName }}">{{ each.firstName }} {{ each.middleName }} {{ each.lastName }}</a> </td>
                                <td></td>
                            {% endif %}
                        </tr>
                    {% else  %}
                        <tr><td class="empty-list" colspan="4">No records yet!</td></tr>
                    {% endfor %}
                
                </table>

     
            </div>
            
            {% endblock %}
        {% endembed %}
    </div>

    <div id="update-status-container" title="Edit Institution Status" style="display:none">
        <p>
            <strong id="current-institution"></strong> is currently <strong id="current-status"></strong>. 
            Select an option below to update its status.
        </p>
        <form id="update-status-form" method="POST">
        <select name="status" id="selected-status">
        </select>
        <input type="submit" class="green-button" value="Confirm"/>
        </form>

    </div>
    
{% endblock %}

