{% extends 'FrontendBundle::layout.html.twig' %}

{% block content %}
<style>
<!--
    .treatments-list div.matches {
    
    }

    .treatments-list ul.level1 {
        border-bottom: 1px solid #E6E6E6;
        margin-bottom: 1.4em;
    }

    .treatments-list li {
        margin: 0.5em 0;
        list-style: none;
    }
    
    .treatments-list li.level1 {
        list-style: none;
    }
    
    .treatments-list li.level2 {
        list-style: none;
    }
    
    .treatments-list li.level1 h5 {
        font-size: 1.2em;
    }
    
    .treatments-list li.level1 h5  a{
        color: #4D4D4D;
    }
    
    .treatments-list li.level2 h5 {
        font-size: 1.0em;
        font-weight: normal;
    }
    
    .treatments-list li.level2 h5  a{
        color: #4D4D4D;
    }
    
    .treatments-list ul.level1:last-child {
        border-bottom: none;
    }
-->
</style>

    <div id="details" class="row">
        <div id="main_content" class="span10">
            <header class="filters">
                <h2 class="total">Treatments</h2>
            </header>
            {#-- media search-matches treatments #}
            <div class="treatments-list">
                <div class="matches">

                        {% for specialization in specializations %}
                        
                            <ul class="match level1" >
                                <li class="level1">
                                    <h5><a href="{{ path('frontend_search_results_specializations', {specialization: specialization.slug}) }}">{{ specialization.name }}</a></h5>
                                </li>

                                {% set groupedSpecializations = group_treatments_by_subspecialization(specialization.treatments) %}

                                {% for subSpecializationName,each in groupedSpecializations %}

                                <li>
                                    <ul>
                                    
                                    {% if each.subSpecialization %}
                                        <li class="level2">
                                            <h5>
                                            <a href="{{ path('frontend_search_results_subSpecializations', {specialization: specialization.slug, subSpecialization: each.subSpecialization.slug}) }}"> {{ subSpecializationName }}</a>
                                            </h5>
                                        </li>
                                    {% endif %}

                                    {% for treatment in each.treatments %}
                                        <li><a href="{{ path('frontend_search_results_treatments', {specialization: specialization.slug, treatment: treatment.slug }) }}">- {{ treatment.name }}</a></li>
                                    {% endfor %}
                                    
                                    </ul>
                                </li>
                                {% endfor %}    
                            </ul>
                        {% endfor %}


                </div>
            </div>

        </div><!--End of main_content-->

    </div>
<!--End of content-->
{% endblock %}