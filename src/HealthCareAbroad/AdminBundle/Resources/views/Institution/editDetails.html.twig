{% extends 'AdminBundle::layout.institution.html.twig' %}
{% set selectedTab = 'institutions'%}
{% set selectedSubTab = 'institutions_edit'%}
{% set insitutionDetailLabels = getClassLabel('institution_detail') %}
{% block content %}
    <div class="span9"> 
    	 {% embed 'HelperBundle:Widgets:section.html.twig' with { 
                title: ( form.vars.value.id ? 'Edit ' : 'Add ' ) ~ insitutionDetailLabels.singular | title ,
                actions: [{link: path('admin_institution_add'), label: 'Add New Institution', 'icon' : 'icon-list' }]
            }
        %}
    	
        	{% block sectionContent %}
			      {% include '::notice.admin.html.twig' %}
				<h5>{# institution.typeLabel() #}</h5>
				
				<form novalidate="novalidate" action="{{ path('admin_institution_edit_details', {institutionId: institution.id }) }}" method="POST"  class="basic-form">
				    {{ form_errors(form) }}
		            {{ form_row( form.name ) }}
                    {{ form_row( form.description, {attr: {class:'tinymce', style: 'width: 750px;'} } ) }}
                    {{ form_row( form.type ) }}
                    {{ form_row( form.contactEmail ) }}
                    {{ form_row( form.contactNumber) }}
                    {{ form_widget( form.websites) }}
                    <hr />
                    <h5 style="margin-bottom: 10px;"> Institution Address </h5>
                    
                    {{ form_widget( form.address1 ) }}
                    {{ form_row( form.country ) }}
                    {{ form_row( form.city, {attr: {'class': 'city_dropdown'}} ) }}
                    {{ form_row( form.state ) }}               
                    {{ form_row( form.zipCode ) }}
		  			    
		  			{{ form_rest(form) }}
	  			    <input type="submit" name="submit" value="Submit" class="btn-large btn-primary"/>
	  			</form>
  			{% endblock %}
		{% endembed %}
	</div>
{% endblock %}
{% block inlineJavascriptCode %}
<script src="{{ asset('bundles/helper/js/Location.js') }}"></script>
<script type="text/javascript">
<!--
    Location.loadCitiesUrl = '{{ path("helper_loadCities") }}';
    $(function(){
        $('#institution_profile_form_country').change();

        $('#dialog-container').dialog({
            position: ['center', 100],
            autoOpen: false,
            width: 750,
            modal: true,
            resizable: false,
            close: function() {}
        });

        $('a.addLanguageButton').click(function(){
        	var elem = $(this);
			var _url = elem.attr('href');

			$("#dialog-container").empty();
			//$('#dialog-container').dialog('option','title', (elem.hasClass("edit") ? 'Edit' : 'Add') + ' GlobalAwards');
            $('#dialog-container').dialog({
            	title: 'Add Languages',
                open: function() {
                    $.ajax(_url)
                        .done(function (data) {                        
                        	$('#dialog-container').html(data);
                        }
                    );
                },
            });

        	$('#dialog-container').dialog("open");

             	return false;           
        });

        $('a.addofferedServices').click(function(){
        	var elem = $(this);
			var _url = elem.attr('href');

			$("#dialog-container").empty();
			//$('#dialog-container').dialog('option','title', (elem.hasClass("edit") ? 'Edit' : 'Add') + ' GlobalAwards');
            $('#dialog-container').dialog({
            	title: 'Add Offered Services',
                open: function() {
                    $.ajax(_url)
                        .done(function (data) {        
                        	$('#dialog-container').html(data);
                        }
                    );
                },
            });

        	$('#dialog-container').dialog("open");

             	return false;           
        });
    });
//-->
</script>
{% endblock %}