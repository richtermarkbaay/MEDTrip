{% embed '::contentWrapper.admin.html.twig' %}
	{% block wrappedContent %}

		<form action="{{ formAction }}" method="post" {{ form_enctype(form) }} class="basic-form">
			<div>
				<label>Medical Center</label>
				<span class="fixed-value">{{ institutionMedicalCenter.medicalCenter.Name }}</span>
			</div>

			<div>
				<label>Procedure Type</label>
				<span class="fixed-value">{{ institutionMedicalProcedureType.medicalProcedureType.name }}</span>
			</div>

			{% if not isNew %}
				<div>
					<label>Procedure</label>
					<span class="fixed-value">{{ medicalProcedureName }}</span>
				</div>
			{% endif %}
			
			{{ form_row(form.medicalProcedure) }}
			{{ form_row(form.description) }}
			{{ form_row(form.status) }}
			{{ form_rest(form) }}
		    <input type="submit" class="form-submit" name="submit"/>
		</form>
	{% endblock %}
{% endembed %}


{% block inlineJavascriptCode %}
	<script src="{{ asset('bundles/institution/js/InstitutionMedicalCenter.js') }}"></script>
	<script type="text/javascript">
		$(function(){
		    InstitutionMedicalCenter.setCommonDialog($('#dialog-container'), {
			    position: ['center', 100],
			    autoOpen: false,
			    width: 750,
			    modal: true,
			    resizable: false,
			    close: function() { $('#dialog-container').empty(); }
			});

		    InstitutionMedicalCenter.commonDialog.find('form').submit(function(){
		        $.post($(this).attr('action'), $(this).serialize(), function(result) {
		        	if($.isPlainObject(result)) {
		        	    window.location = result.redirect_url;
		            } else {
		            	InstitutionMedicalCenter.commonDialog.html(result);
		            	InstitutionMedicalCenter.commonDialog.find('.tinymce').tinymce(HCA.tinymceConfig.themeSimple);
		            }
		        });

		        InstitutionMedicalCenter.commonDialog.html('<div class="ajax-loading">saving request . . .</div>');
		        
		        return false;
		    });
		});
	</script>
{% endblock %}