{% extends 'AdminBundle::layout.html.twig' %}
{% set selectedTab = 'institutions'%}
{% block content %}

	<div id="content">

		<div id="page-heading"><h3>{{ institutionName }} Medical Centers</h3></div>

		{% embed '::contentWrapper.admin.html.twig' %}

			{% block wrappedContent %}

				{% include '::notice.admin.html.twig' %}
			
				{% include '::relatedTasks.base.admin.html.twig' with 
					{'contents': [
						{
							'title': 'Add medical center', 
							'description': 'Add new medical center to this institution',
							'class': 'add-icon add-medical-center',
							'href': path('admin_institution_medicalCenter_add', {institutionId:institutionId}), 
							'links': [{
								'title': 'click here to add',
								'class': 'add-medical-center',
								'href': path('admin_institution_medicalCenter_add', {institutionId:institutionId})
							}]
						}
	    			]} 
				%}

				<!-- Render Filter Box -->
				{% autoescape false %} {{ listFilters is defined ? listFilters : '' }} {% endautoescape %}	
				
			    <table width="70%" class="generic-table" id="medical-centers-list">
    				<tr>
    					<th width="300px"><a href="#">Medical Centers</a></th>
    					<th><a href="#">Description</a></th>
    					<th><a href="#">Options</a></th>
    				</tr>

    				{% for center in institutionMedicalCenters %}
    				    <tr class="{{ cycle(['alternate-row', ''], loop.index) }}">

        					<td>{{ center.medicalCenter | title }}</td>
        					<td>{{ center.description }}</td>
        					<td class="options-width">
            					<a href="{{ path('admin_institution_medicalCenter_edit', {institutionId:institutionId, imcId:center.id}) }}" title="Edit" class="icon-1 info-tooltip edit-medical-center"></a>
            					{% set class = center.status ? 'icon-2' : 'icon-5' %}
            					<a href="{{ path('admin_institution_medicalCenter_updateStatus', {imcId:center.id}) }}" title="{{ center.status ? 'Delete' : 'Activate' }}" class="update-status {{ class }} info-tooltip"></a>
								<a class="icon-type" href="{{ path('admin_institution_manageProcedureTypes', {institutionId:institutionId, imcId:center.id}) }}">procedure types</a>
        					</td>
        				</tr>
        				
        			{% else %}
    				    <tr>
    				        <td colspan="4" class="empty-list"> {{ app.session.get('institutionName') }} has no medical centers yet. </td>
    				    </tr>
    				{% endfor %}
    				
				</table>

			{% endblock %}
		{% endembed %}
	</div>
{% endblock %}