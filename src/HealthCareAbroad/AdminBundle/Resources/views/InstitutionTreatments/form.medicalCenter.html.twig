{% extends 'AdminBundle::layout.institution.html.twig' %}

{% set centerLabel = getClassLabel('institution_medical_center').singular | title %}

{% block content %}
    <div class="span9">

        {% embed 'HelperBundle:Widgets:section.html.twig' with { title: 'Add ' ~ centerLabel } %}
            {% block sectionContent %}

                <h3>{{ centerLabel }} Information</h3>
    
                <form novalidate="novalidate" action="{{ path('admin_institution_medicalCenter_add', { 'institutionId':institution.id, 'imcgId': institutionMedicalCenter.id }) }}" method="POST" {{ form_enctype(form) }} class="basic-form">        
                    {{ form_errors(form) }}   
        
                    {{ form_row(form.name, { 'attr': {'class': 'input-xlarge'} }) }}
                    {{ form_row(form.description, { 'attr': {style: "width: 70%"} } ) }}
                    
                    </br>
                    {{ form_rest(form) }}
                                        	                        	
                	<span class="btn-medium"><i class="icon-picture"></i> Add Media File Here</span>
                	<div class="clear"><br></div>
                	<input type="submit" name="submit" value="Submit" class="btn btn-large btn-primary" />
                </form>

            {% endblock %} 

        {% endembed %}
    </div>
    
    {% block inlineJavascriptCode %}
        <script src="{{ asset('js/jquery/timepicker.js') }}"></script>
    	<script src="{{ asset('js/jquery/globalize.js') }}"></script>
    	<script src="{{ asset('js/jquery/jquery.ui.mask.js') }}"></script>
        <script>
        	$(function() {
        		var isNew = '{{ isNew }}';
    			
            	if(isNew) {
            		$('#businessHourCheckBox').attr("checked","checked");
            	}
    	    	$(".hour").timepicker({ seconds: false});
    	    	if ($('#businessHourCheckBox').attr('checked')) {
    	    		$(this).parent().parent().parent().find('.is_open').val('1');
        	    	$(this).parent().parent().parent().find('.hour').spinner({ disabled: true }).val(" 8:00 AM");
        	    	$(this).parent().parent().parent().next().find('.businessHourNotes').attr({ disabled: true });
        	    	$(this).parent().parent().parent().find('.is_open_checkbox').attr({ checked: 'checked'});
        	    	$(this).parent().parent().parent().find('.is_close_checkbox').removeAttr('checked');
                }
    	    	$('input.is_close_checkbox').each(function(){
                    if(this.checked) {
                        $(this).parent().parent().parent().find('.hour').val("");
                        $(this).parent().parent().parent().find('.hour').spinner({ disabled: true });
                        $(this).parent().parent().parent().next().find('.businessHourNotes').val("");
                        $(this).parent().parent().parent().next().find('.businessHourNotes').attr({ disabled: true });
                    }
                });
                $('input.is_open_checkbox').each(function(){
                    if(this.checked) {
                    	$(this).parent().parent().parent().find('.hour').val("8:00 AM");
                        $(this).parent().parent().parent().find('.hour').spinner({ disabled: true });
                        $(this).parent().parent().parent().find('.is_open').val('1');
                        $('textarea.businessHourNotes').removeAttr('disabled');
                        $('input.is_close_checkbox').removeAttr('checked');
                    }
                });
    	    });
        	
        	$('input.is_close_checkbox').change(function(){
                if(this.checked) {
                	$('#businessHourCheckBox').removeAttr('checked');
                	$(this).parent().parent().parent().find('.is_open').val('0');
        	    	$(this).parent().parent().parent().find('.hour').spinner({ disabled: true }).val(" 8:00 AM");
        	    	$(this).parent().parent().parent().find('.is_open_checkbox').removeAttr('checked');
                    $(this).parent().parent().parent().next().find('.businessHourNotes').val("");
                    $(this).parent().parent().parent().next().find('.businessHourNotes').attr({ disabled: true });
                }
                else
                {
                	$(this).parent().parent().find('.hour').val(" 8:00 AM");
                	$(this).parent().parent().parent().find('.is_open').val('');
                    $(this).parent().parent().parent().find('.hour').spinner({ disabled: false });
                    $(this).parent().parent().parent().find('.is_open_checkbox').removeAttr('checked');
                    $(this).parent().parent().parent().next().find('.businessHourNotes').removeAttr('disabled');
                }

            });
            $('input.is_open_checkbox').change(function(){
                if(this.checked) {
                	$(this).parent().parent().parent().find('.is_open').val('1');
        	    	$(this).parent().parent().parent().find('.hour').spinner({ disabled: true }).val(" 8:00 AM");
        	    	$('textarea.businessHourNotes').removeAttr('disabled');
        	    	$(this).parent().parent().parent().find('.is_close_checkbox').removeAttr('checked');
                }
                else
                {
                    $(this).parent().parent().parent().find('.hour').val(" 8:00 AM");
                    $(this).parent().parent().parent().find('.hour').spinner({ disabled: false });
                    $(this).parent().parent().parent().find('.is_open').val('');
                    $('textarea.businessHourNotes').removeAttr('disabled');
                }

            });

            $('#businessHourCheckBox').click(function(){
        	    if ($('#businessHourCheckBox').attr('checked')) {
        	    	$(this).parent().parent().parent().find('.is_open').val('1');
        	    	$(this).parent().parent().parent().find('.hour').spinner({ disabled: true }).val(" 8:00 AM");
        	    	$(this).parent().parent().parent().next().find('.businessHourNotes').attr({ disabled: true });
        	    	$(this).parent().parent().parent().find('.is_open_checkbox').attr({ checked: 'checked'});
        	    	$(this).parent().parent().parent().find('.is_close_checkbox').removeAttr('checked');
        	    }else{
        	    	$(this).parent().parent().parent().find('.is_open').val('');
        	    	$(this).parent().parent().parent().find('.hour').spinner({ disabled: false }).val(" 8:00 AM");
        	    	$('textarea.businessHourNotes').removeAttr('disabled');
        	    	$(this).parent().parent().parent().find('.is_open_checkbox').removeAttr('checked');
            	}
        	}) 

        </script>
    {% endblock %}
{% endblock %}

