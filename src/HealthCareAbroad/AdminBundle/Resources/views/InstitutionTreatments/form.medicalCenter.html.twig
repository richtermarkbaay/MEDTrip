{% extends 'AdminBundle::layout.institution.html.twig' %}

{% set centerLabel = getClassLabel('institution_medical_center').singular | title %}

{% block content %}
    <div class="span9">

        {% embed 'HelperBundle:Widgets:section.html.twig' with { title: 'Add ' ~ centerLabel } %}
            {% block sectionContent %}

                <h3>{{ centerLabel }} Information</h3>
    
                <form novalidate="novalidate" action="{{ path('admin_institution_medicalCenter_add', { 'institutionId':institution.id, 'imcgId': institutionMedicalCenter.id }) }}" method="POST" {{ form_enctype(form) }} class="basic-form">        
                    {{ form_errors(form) }}   
        
                    {{ form_row(form.name, { 'attr': {'class': 'input-xlarge'} }) }}
                    {{ form_row(form.description, { 'attr': {style: "width: 70%"} } ) }}
                    
                    </br>
                    {{ form_label(form.businessHours) }}
                        <label><input type="checkbox" name="businessHourCheckBox" id="businessHourCheckBox" >I have no business hours</label>
                        {% include 'InstitutionBundle:Widgets:medicalCenter.businessHours.html.twig' %}
                    
                    {{ form_rest(form) }}
                                        	                        	
                	<span class="btn-medium"><i class="icon-picture"></i> Add Media File Here</span>
                	<div class="clear"><br></div>
                	<input type="submit" name="submit" value="Submit" class="btn btn-large btn-primary" />
                </form>

            {% endblock %} 

        {% endembed %}
    </div>
    
    {% block inlineJavascriptCode %}
        <script src="{{ asset('js/jquery/timepicker.js') }}"></script>
    	<script src="{{ asset('js/jquery/globalize.js') }}"></script>
    	<script src="{{ asset('js/jquery/jquery.ui.mask.js') }}"></script>
        <script>
        	$(function() {
    	    	$(".hour").timepicker({ seconds: false});
    	    	$('input.is_closed_checkbox').each(function(){
    			    if(this.checked) {
    			    	$(this).parent().parent().find('.hour').val("");
    			    	var id = $(this).parent().parent().find('.hour').spinner({ disabled: true });
    				}
    			});
    	    });
        	$('#businessHourCheckBox').click(function(){
            	
        	    if ($('#businessHourCheckBox').attr('checked')) {

        	    	$(this).parent().parent().find('.hour').val("");
        	    	$(this).parent().parent().find('.hour').spinner({ disabled: true });
        	    	$('#clinicHoursTable').hide();
        	    	
        	    }else{
            	    $('#clinicHoursTable').show();
            	    $(this).parent().parent().find('.hour').val("8:00 AM");
        	    	$(this).parent().parent().find('.hour').spinner({ disabled: false });
            	}
        	}) 
    	    $('input.is_closed_checkbox').change(function(){
    		    if(this.checked) {
    		    	$(this).parent().parent().find('.hour').val("");
    		    	var id = $(this).parent().parent().find('.hour').spinner({ disabled: true });
    			}
    		    else 
    		    {
    		    	$(this).parent().parent().find('.hour').val("8:00 AM");
    		    	var id = $(this).parent().parent().find('.hour').spinner({ disabled: false });
    		    }
    		   
    		});
        </script>
    {% endblock %}
{% endblock %}

